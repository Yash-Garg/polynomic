<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for path/bounding-box/index.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\..\prettify.css" />
    <link rel="stylesheet" href="..\..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\..\index.html">All files</a> / <a href="index.html">path/bounding-box</a> index.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">76.47% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>39/51</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">53.57% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>15/28</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">75% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>3/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">76.47% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>39/51</span>
      </div>
    </div>
  </div>
  <div class='status-line medium'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">3x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Point } from "../../point/points"
import { isM, isZ } from "../../point/is"
import toCubic from "../to-cubic"
&nbsp;
export default function boundingBox(rawPath) {
  const path = toCubic(rawPath)
  const x = []
  const y = []
&nbsp;
  for (let i = 0 ; i &lt; path.length ; i++) {
    const point = path[i]
    const prev = i &gt; 0 &amp;&amp; path[i - 1]
&nbsp;
    if (isM(point) || isZ(point)) {
      x.push(point.x)
      y.push(point.y)
    } else {
      const { xMin, xMax, yMin, yMax } = cubicBoundingBox(prev, point)
&nbsp;
      x.push(xMin, xMax)
      y.push(yMin, yMax)
    }
  }
&nbsp;
  const xMin = Math.min(...x)
  const xMax = Math.max(...x)
  const yMin = Math.min(...y)
  const yMax = Math.max(...y)
&nbsp;
  return {
    x: xMin,
    y: yMin,
    width: xMax - xMin,
    height: yMax - yMin,
  }
}
&nbsp;
function cubicBoundingBox(prev, point) {
  const p0 = Point(null, prev.x, prev.y)
  const p1 = Point(null, point.parameters.x1, point.parameters.y1)
  const p2 = Point(null, point.parameters.x2, point.parameters.y2)
  const p3 = Point(null, point.x, point.y)
&nbsp;
  const x = getMinMax(p0.x, p1.x, p2.x, p3.x)
  const y = getMinMax(p0.y, p1.y, p2.y, p3.y)
&nbsp;
  return {
    xMin: x.min,
    xMax: x.max,
    yMin: y.min,
    yMax: y.max,
  }
}
&nbsp;
function getMinMax(p0, p1, p2, p3) {
  const a = ((3 * p3) - (9 * p2)) + ((9 * p1) - (3 * p0))
  const b = ((6 * p0) - (12 * p1)) + (6 * p2)
  const c = (3 * p1) - (3 * p0)
  const d = (b ** 2) - (4 * a * c)
&nbsp;
  let min = p0
  let max = p0
&nbsp;
  <span class="missing-if-branch" title="if path not taken" >I</span>if (p3 &lt; min) {
<span class="cstat-no" title="statement not covered" >    min = p3</span>
  }
&nbsp;
  if (p3 &gt; max) {
    max = p3
  }
&nbsp;
  <span class="missing-if-branch" title="else path not taken" >E</span>if (d &gt;= 0) {
    const t1 = (-b + Math.sqrt(d)) / (2 * a)
&nbsp;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (t1 &gt; 0 &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >t1 &lt; 1)</span> {
      const p = <span class="cstat-no" title="statement not covered" >cubic(p0, p1, p2, p3, t1)</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (p &lt; min) {</span>
<span class="cstat-no" title="statement not covered" >        min = p</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (p &gt; max) {</span>
<span class="cstat-no" title="statement not covered" >        max = p</span>
      }
    }
&nbsp;
    const t2 = (-b - Math.sqrt(d)) / (2 * a)
&nbsp;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (t2 &gt; 0 &amp;&amp; t2 &lt; 1) {
      const p = <span class="cstat-no" title="statement not covered" >cubic(p0, p1, p2, p3, t2)</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (p &lt; min) {</span>
<span class="cstat-no" title="statement not covered" >        min = p</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (p &gt; max) {</span>
<span class="cstat-no" title="statement not covered" >        max = p</span>
      }
    }
  }
&nbsp;
  return { min, max }
}
&nbsp;
function <span class="fstat-no" title="function not covered" >cubic(</span>p0, p1, p2, p3, t) {
<span class="cstat-no" title="statement not covered" >  return (p0 * ((1 - t) ** 3))</span>
    + (p1 * 3 * t * ((1 - t) ** 2))
    + (p2 * 3 * (t ** 2) * (1 - t))
    + (p3 * (t ** 3))
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Sep 17 2016 16:01:18 GMT+0200 (Paris, Madrid (heure d’été))
</div>
</div>
<script src="..\..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\..\sorter.js"></script>
</body>
</html>
