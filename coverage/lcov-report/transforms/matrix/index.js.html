<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for transforms/matrix/index.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="..\..\prettify.css" />
    <link rel="stylesheet" href="..\..\base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(..\..\sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="..\..\index.html">All files</a> / <a href="index.html">transforms/matrix</a> index.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">93.94% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>31/33</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">65.79% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>25/38</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>3/3</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">93.94% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>31/33</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">16x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-yes">7x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">43x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">50x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import { Point, defaultPoint } from "../../point/points"
import { isH, isV } from "../../point/is"
import isRelative from "../../point/is-relative"
&nbsp;
export default function matrix(path, m) {
  let lastComputedPoint = defaultPoint
&nbsp;
  return path.map((point, index) =&gt; {
    const prev = index &gt; 0 &amp;&amp; path[index - 1]
&nbsp;
    const px = typeof point.x === "number" ? point.x : <span class="branch-1 cbranch-no" title="branch not covered" >prev.x</span>
    const py = typeof point.y === "number" ? point.y : <span class="branch-1 cbranch-no" title="branch not covered" >prev.y</span>
    const px1 = typeof point.parameters.x1 === "number" &amp;&amp; point.parameters.x1
    const py1 = typeof point.parameters.y1 === "number" &amp;&amp; point.parameters.y1
    const px2 = typeof point.parameters.x2 === "number" &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >point.parameters.x2</span>
    const py2 = typeof point.parameters.y2 === "number" &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >point.parameters.y2</span>
&nbsp;
    // compute position
    const [x, y] = multiply3x1(m, [px, py, 1])
&nbsp;
    // get point code
    let code = point.code
&nbsp;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (
      (isH(point) &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >y !== lastComputedPoint.y)</span>
      || (isV(point) &amp;&amp; <span class="branch-3 cbranch-no" title="branch not covered" >x !== lastComputedPoint.x)</span>
    ) {
<span class="cstat-no" title="statement not covered" >      code = isRelative(point) ? "l" : "L"</span>
    }
&nbsp;
    // compute parameters
    let x1, y1, x2, y2
&nbsp;
    if (px1 !== false &amp;&amp; py1 !== false) {
      [x1, y1] = multiply3x1(m, [px1, py1, 1])
    }
&nbsp;
    <span class="missing-if-branch" title="if path not taken" >I</span>if (px2 !== false &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >py2 !== false)</span> {
<span class="cstat-no" title="statement not covered" >      [x2, y2] = multiply3x1(m, [px2, py2, 1])</span>
    }
&nbsp;
    const parameters = {
      ...point.parameters,
      ...(typeof x1 !== "undefined" &amp;&amp; { x1 }),
      ...(typeof y1 !== "undefined" &amp;&amp; { y1 }),
      ...(typeof x2 !== "undefined" &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >{ x2 })</span>,
      ...(typeof y2 !== "undefined" &amp;&amp; <span class="branch-1 cbranch-no" title="branch not covered" >{ y2 })</span>,
    }
&nbsp;
    // this point will be used to know if the next H or V
    // should be converted into L
    lastComputedPoint = Point(code, x, y, parameters)
&nbsp;
    return lastComputedPoint
  })
}
&nbsp;
function multiply3x1(a, b) {
  const a00 = a[(0 * 3) + 0]
  const a01 = a[(0 * 3) + 1]
  const a02 = a[(0 * 3) + 2]
  const a10 = a[(1 * 3) + 0]
  const a11 = a[(1 * 3) + 1]
  const a12 = a[(1 * 3) + 2]
  const a20 = a[(2 * 3) + 0]
  const a21 = a[(2 * 3) + 1]
  const a22 = a[(2 * 3) + 2]
  const b0 = b[0]
  const b1 = b[1]
  const b2 = b[2]
&nbsp;
  return [
    (a00 * b0) + (a01 * b1) + (a02 * b2),
    (a10 * b0) + (a11 * b1) + (a12 * b2),
    (a20 * b0) + (a21 * b1) + (a22 * b2),
  ]
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Sat Sep 17 2016 16:01:18 GMT+0200 (Paris, Madrid (heure d’été))
</div>
</div>
<script src="..\..\prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="..\..\sorter.js"></script>
</body>
</html>
